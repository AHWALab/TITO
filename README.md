# Threading Inputs to Outputs (TITO)
TITO is a framework designed to run the EF5 hydrologic model operationally, integrating satellite data and machine learning techniques.

## First steps
1. Clone this repository 
  ```sh
      git clone https://github.com/AHWALab/TITO.git
  ```
2. Navigate to the repository folder
  ```sh
     cd TITO/
  ```
3. Run the set up file. This step might take few minutes. 
  ```sh
      ./setup_tito.sh
  ```
After the process is finished, check in your TITO folder the presence of a new subfolder: ML.

## What the folder is composed with ?

This repository is desiged to run EF5 operational over West Africa. Users should populate the folders using the topographical and parameters grids for the region of interest and modify the control file (templates/control.txt) accordingly. A guide step-by-step to create the needed layers can be found in: [EF5-builder-toolkit](https://github.com/AHWALab/EF5-builder-toolkit).

- **westafrica1km_config.py**: Is where the user can change the setup for running the operational system.
- **orchestrator.py**: The main code for the system.
- **pipeline.sh**: This bash code is what the users will run. This code activates the conda environment "tito_env" and run the **orchestrator.py** with the specifications on the **westafrica1km_config.py**.
- **basic:** Contains the DEM, FAC, FDIR files.
- **pet:** Contains the monthly PET files.
- **parameters:** Contains the distributed parameters for KW and CREST models.
- **states:** Contains the states created by the operational system.
- **outputs:** Folder where the operational outputs will be saved.
- **precip:** In this folder the imerg (qpe) files will be downloaded and the qpf files generated by the nowcasting will be saved.
- **precipEF5:** Precipitation files (qpe+qpf) will be copied in this folder with a unique format to be ingested.
- **templates:** In each iteration control files will be written in this folder.
- **qpf_store:** In each iteration, qpf files will be store in this folder to be used in case imerg (qpe) retrieval failed.
- **ML:** this folder contains the machine learning routines used to create the nowcast qpf files.
- **tito-utils:** This folder contains the utilities and codes needed to run TITO. 

## How to run? 
After completing the installation of the required environment and populating the corresponding EF5 folders, run TITO by:
```sh
  ./pipeline.sh
```

