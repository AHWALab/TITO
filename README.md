# Threading Inputs to Outputs (TITO)
TITO is a framework designed to run the EF5 hydrologic model operationally, integrating satellite data and machine learning techniques to support real-time forecasting and hydrologic analysis.

## Installation Instructions
**1. Clone the repository**
  ```sh
  git clone https://github.com/AHWALab/TITO.git
  ```
**2. Navigate to the repository folder**
  ```sh
  cd TITO/
  ```
**3. Navigate to the repository folder**
   This step might take few minutes. 
  ```sh
  ./setup_tito.sh
  ```
After installation, ensure that your TITO folder contains the following subdirectories and files.

## Repository structure

This repository is desiged to run EF5 operational over West Africa. 
Users must populate the required folders with topographic and parameter grids for their region of interest, and modify the EF5 control file (`templates/ef5_control_template.txt`) accordingly. A guide step-by-step to create the needed layers can be found in: [EF5-builder-toolkit](https://github.com/AHWALab/EF5-builder-toolkit).

### Key Files & Folders
- **`westafrica1km_config.py`** – Configuration file to set up your operational run.
- **`orchestrator.py`** – Main Python script that manages the entire workflow.
- **`pipeline.sh`** – Bash script that activates the `tito_env` Conda environment and executes `orchestrator.py` using settings from `westafrica1km_config.py`.

### Input / Output Directories
- **`basic/`** – Contains DEM, FAC, and FDIR files.
- **`pet/`** – Contains monthly PET (Potential Evapotranspiration) grids.
- **`parameters/`** – Contains distributed parameters for the KW and CREST models.
- **`states/`** – Stores model state files generated during operational runs.
- **`outputs/`** – Output folder where simulation results are saved.
- **`precip/`** – IMERG QPE files are downloaded here; QPF files generated by the nowcasting system are also stored here.
- **`precipEF5/`** – QPE and QPF files are reformatted and copied here to be ingested by EF5.
- **`templates/`** – Stores EF5 control file templates, which are dynamically updated during each run.
- **`qpf_store/`** – Stores QPF files for fallback use in case QPE retrieval fails.
- **`ML/`** – Contains machine learning routines used to generate QPF forecasts.
- **`tito_utils/`** – Collection of utility modules and helper scripts used internally by TITO.

## How to run? 
After completing the installation of the required environment and populating the corresponding EF5 folders, run TITO by:
```sh
./pipeline.sh
```

